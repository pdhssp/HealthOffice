<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./resources/template/pdhs_template_1.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <h:form >
            <p:growl autoUpdate="true" />
            <p:panel header="#{postLabels.post}" >

                <p:panelGrid columns="2">
                    <h:outputLabel value="#{postLabels.from}" >
                    </h:outputLabel>
                    <p:selectOneMenu  id="cmbFromIns" value="#{letterController.fromInstitution}" >
                        <f:selectItems value="#{letterController.institutions}" var="fins" itemValue="#{fins}" itemLabel="#{fins.name}"  />
                        <f:ajax execute="cmbFromIns" render="cmbFromPer" event="change"/>
                    </p:selectOneMenu>
                    <h:outputLabel value="" >
                    </h:outputLabel>
                    <p:selectOneMenu id="cmbFromPer"  value="#{letterController.current.fromPerson}" >
                        <f:selectItems value="#{letterController.fromPersons}" var="fper" itemValue="#{fper}" itemLabel="#{fper.name}"/>
                    </p:selectOneMenu>                    
                    <h:outputLabel value="#{postLabels.receivedDate}" >
                    </h:outputLabel>
                    <p:calendar value="#{letterController.current.receivedDate}" pattern="dd/MM/yyyy" />

                    <h:outputLabel value="#{postLabels.letterDate}" >
                    </h:outputLabel>
                    <p:calendar value="#{letterController.current.lettterDate}" pattern="dd/MM/yyyy" />
                    <h:outputLabel value="#{postLabels.registered }" >
                    </h:outputLabel>
                    <p:selectBooleanCheckbox value="#{letterController.current.registered}"/>
                    <h:outputLabel value="#{postLabels.registereNo}" >
                    </h:outputLabel>
                    <p:inputText value="#{letterController.current.code}"/>
                    <h:outputLabel value="#{postLabels.number}" >
                    </h:outputLabel>  
                    <p:inputText value="#{letterController.current.name}"  style="width: 400px"/>
                    <h:outputLabel value="#{postLabels.topic}" >
                    </h:outputLabel>
                    <p:inputText value="#{letterController.current.description}" style="width: 400px"/>
                    <h:outputLabel value="#{postLabels.content}" >
                    </h:outputLabel>
                    <p:inputTextarea value="#{letterController.current.letterContent}" style="width: 400px; height: 100px;"/>
                    <h:outputLabel value="#{postLabels.subject}" >
                    </h:outputLabel>
                    <p:selectOneMenu id="cmbSub" value="#{letterController.current.subject}" >
                        <f:selectItems value="#{letterController.subjects}" var="sub" itemValue="#{sub}" itemLabel="#{sub.name}"/>
                    </p:selectOneMenu>                       
                    <h:outputLabel value="#{postLabels.assignedTo}" >
                    </h:outputLabel>
                    <p:selectOneMenu id="cmbToIns" value="#{letterController.toInstitution}" >
                        <f:selectItems value="#{letterController.institutions}" var="tins" itemValue="#{tins}" itemLabel="#{tins.name}"/>
                        <f:ajax execute="cmbToIns" render="cmbToPer" event="change"/>
                    </p:selectOneMenu>
                    <h:outputLabel value="" >
                    </h:outputLabel>
                    <p:selectOneMenu id="cmbToPer"  value="#{letterController.current.toPerson}" >
                        <f:selectItems value="#{letterController.toPersons}" var="tper" itemValue="#{tper}" itemLabel="#{tper.givenName}"/>
                    </p:selectOneMenu> 
                    <p:commandButton ajax="false" value="#{labels.save}" action="#{letterController.addDirectly}" />
                </p:panelGrid>
            </p:panel>


        </h:form>        



    </ui:define>

</ui:composition>
